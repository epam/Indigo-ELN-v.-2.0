<app-card
  [classList]="'p-4 cursor-pointer'"
  [routerLink]="['/projects', project.id]"
>
  <div
    class="gap-y-2 grid text-[.875rem] text-neutral-800 project-item"
    [ngClass]="{
      'list-view': variant === 'list',
      'grid-view': variant === 'grid',
    }"
  >
    <h3
      class="flex items-center gap-x-2 font-semibold text-[1rem] text-neutral-1000 [grid-area:projectTitle]"
    >
      <em class="text-[1.25rem] text-primary-400 indicon-briefcase"></em
      >{{ project.name }}
    </h3>
    <div class="flex ml-auto [grid-area:clickMore]">
      <button
        mat-icon-button
        (click)="$event.stopPropagation()"
        [matMenuTriggerFor]="menu"
        class=""
        aria-label="Example icon-button with a menu"
      >
        <mat-icon>more_horiz</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item>
          <mat-icon>dialpad</mat-icon>
          <span>Redial</span>
        </button>
        <button mat-menu-item disabled>
          <mat-icon>voicemail</mat-icon>
          <span>Check voice mail</span>
        </button>
        <button mat-menu-item>
          <mat-icon>notifications_off</mat-icon>
          <span>Disable alerts</span>
        </button>
      </mat-menu>
    </div>
    <div class="[grid-area:notebookLabel]">Notebook</div>
    <div
      [ngClass]="{
        'ml-auto': variant === 'grid',
      }"
      class="font-semibold text-h4 [grid-area:notebookValue]"
    >
      12
    </div>
    <div class="[grid-area:experimentLabel]">Experiments</div>
    <div
      [ngClass]="{
        'ml-auto': variant === 'grid',
        flex: variant === 'list',
      }"
      class="[&_span]:font-semibold text-h4 [&_i]:text-neutral-500 [grid-area:experimentValue]"
    >
      @if (project.experimentCount.OPEN) {
        <span class="text-primary-400">{{ project.experimentCount.OPEN }}</span>
      }
      @if (project.experimentCount.WAITING_FOR_SIGNATURE) {
        <i class="text-b2">/</i>
        <span class="text-orange-200">{{
          project.experimentCount.WAITING_FOR_SIGNATURE
        }}</span>
      }
      @if (project.experimentCount.COMPLETED) {
        <i class="text-b2">/</i>
        <span class="text-green-200">{{
          project.experimentCount.COMPLETED
        }}</span>
      }
      @if (project.experimentCount.REJECTED) {
        <i class="text-b2">/</i>
        <span class="text-red-200">{{ project.experimentCount.REJECTED }}</span>
      }
      <span class="mx-3 font-thin! text-neutral-500">|</span>
      <!-- TODO -->
      <span class="font-semibold text-h4 text-neutral-1000">145</span>
    </div>
    <div class="[grid-area:lastEditedLabel]">Last Edited</div>
    <div
      class="[grid-area:lastEditedValue]"
      [ngClass]="{
        'ml-auto': variant === 'grid',
      }"
    >
      {{ project.modifiedAt | date: 'dd MMM yyyy' }} by
      {{ project.modifiedBy.displayName }}
    </div>
    <div class="[grid-area:createdLabel]">Created</div>
    <div
      class="[grid-area:createdValue]"
      [ngClass]="{
        'ml-auto': variant === 'grid',
      }"
    >
      {{ project.createdAt | date: 'dd MM yyyy' }} by
      {{ project.createdBy.displayName }}
    </div>

    @if (variant === 'grid') {
      <div
        class="flex items-center pt-3 border-t border-t-neutral-300 w-full [grid-area:members]"
      >
        <div class="flex -space-x-2 [grid-area:membersLabel]">
          @for (user of mock_users.slice(0, 3); track user) {
            <app-avatar classList="w-6 h-6" [img]="user" />
          }
          @if (mock_users.length > 3) {
            <span
              class="flex justify-center items-center bg-primary-400 rounded-full w-6 h-6 text-white text-xs"
              >+{{ mock_users.length - 3 }}</span
            >
          }
        </div>
        <span class="ml-2 text-b2 text-neutral-800"
          >{{ mock_users.length }} Members</span
        >
      </div>
    } @else {
      <div class="[grid-area:membersLabel]">
        <span class="text-b2 text-neutral-800"> Members</span>
      </div>
      <div class="flex items-center [grid-area:membersValue]">
        <div class="flex -space-x-2">
          @for (user of mock_users.slice(0, 3); track user) {
            <app-avatar classList="w-6 h-6" [img]="user" />
          }
          @if (mock_users.length > 3) {
            <span
              class="flex justify-center items-center bg-primary-400 rounded-full w-6 h-6 text-white text-xs"
              >+{{ mock_users.length - 3 }}</span
            >
          }
        </div>
      </div>
    }
  </div>
</app-card>
